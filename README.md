A state machine drag and drop implementation
